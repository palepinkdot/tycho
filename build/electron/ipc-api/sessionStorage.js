"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const electron_1=require("electron"),config_1=require("../../config"),debug=require("debug")("Ferdi:ipcApi:sessionStorage");function deduceSession(e){return e?electron_1.session.fromPartition(e===config_1.TODOS_PARTITION_ID?config_1.TODOS_PARTITION_ID:`persist:service-${e}`):electron_1.session.defaultSession}exports.default=async()=>{electron_1.ipcMain.on("clear-storage-data",((e,{serviceId:r,targetsToClear:t})=>{try{const e=deduceSession(r);e.flushStorageData(),t?(debug("Clearing targets:",t),e.clearStorageData(t)):(debug("Clearing all targets"),e.clearStorageData())}catch(e){debug(e)}})),electron_1.ipcMain.handle("clear-cache",((e,{serviceId:r})=>deduceSession(r).clearCache()))};