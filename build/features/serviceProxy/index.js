"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;const mobx_1=require("mobx"),remote_1=require("@electron/remote"),debug=require("debug")("Ferdi:feature:serviceProxy");function init(e){debug("Initializing `serviceProxy` feature"),(0,mobx_1.autorun)((()=>{exports.config.isEnabled=!0;const o=e.services.enabled,r=e.settings.proxy;debug("Service Proxy autorun");for(const e of o){const o=remote_1.session.fromPartition(`persist:service-${e.id}`);if(exports.config.isEnabled){const t=r[e.id];if(t&&t.isEnabled&&t.host){const r=`${t.host}${t.port?`:${t.port}`:""}`;debug(`Setting proxy config from service settings for "${e.name}" (${e.id}) to`,r),o.setProxy({proxyRules:r}).then((()=>{debug(`Using proxy "${r}" for "${e.name}" (${e.id})`)})).catch((e=>console.error(e)))}}}}))}exports.config=(0,mobx_1.observable)({isEnabled:!0}),exports.default=init;