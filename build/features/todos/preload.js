"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const electron_1=require("electron"),constants_1=require("./constants"),debug=require("debug")("Ferdi:feature:todos:preload");debug("Preloading Todos Webview");let hostMessageListener=({action:e})=>{if("todos:initialize-as-service"===e)electron_1.ipcRenderer.sendToHost("hello")};if(window.ferdi={onInitialize(e){hostMessageListener=e,electron_1.ipcRenderer.sendToHost(constants_1.IPC.TODOS_CLIENT_CHANNEL,{action:"todos:initialized"})},sendToHost(e){electron_1.ipcRenderer.sendToHost(constants_1.IPC.TODOS_CLIENT_CHANNEL,e)}},electron_1.ipcRenderer.on(constants_1.IPC.TODOS_HOST_CHANNEL,((e,o)=>{debug("Received host message",e,o),hostMessageListener(o)})),"https://app.franztodos.com/login/"===window.location.href){const e=document.createElement("p");e.textContent="You are using Franz's official Todo Service.\nThis service will only work with accounts registered with Franz - no Ferdi accounts will work here!\nIf you do not have a Franz account you can change the Todo service by going into Ferdi's settings and changing the \"Todo server\".\nYou can choose any service as this Todo server, e.g. Todoist or Apple Notes.";let o=0;const t=setInterval((()=>{const n=document.querySelector("p");n?(clearInterval(t),n.parentElement?.insertBefore(e,n)):(o+=1,o>1e3&&clearInterval(t))}),10)}