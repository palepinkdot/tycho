"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=require("react"),_propTypes=_interopRequireDefault(require("prop-types")),_mobxReact=require("mobx-react"),_reactJss=_interopRequireDefault(require("react-jss")),_reactIntl=require("react-intl"),_js=require("@mdi/js"),_icon=require("../../../components/ui/icon"),_jsxRuntime=require("react/jsx-runtime");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const messages=(0,_reactIntl.defineMessages)({goHome:{id:"webControls.goHome",defaultMessage:[{type:0,value:"Home"}]},openInBrowser:{id:"webControls.openInBrowser",defaultMessage:[{type:0,value:"Open in Browser"}]},back:{id:"webControls.back",defaultMessage:[{type:0,value:"Back"}]},forward:{id:"webControls.forward",defaultMessage:[{type:0,value:"Forward"}]},reload:{id:"webControls.reload",defaultMessage:[{type:0,value:"Reload"}]}});let buttonTransition="none";window&&window.matchMedia("(prefers-reduced-motion: no-preference)")&&(buttonTransition="opacity 0.25s");const styles=e=>({root:{background:e.colorBackground,position:"relative",borderLeft:[1,"solid",e.todos.todosLayer.borderLeftColor],zIndex:300,height:50,display:"flex",flexDirection:"row",alignItems:"center",padding:[0,10],"& + div":{height:"calc(100% - 50px)"}},button:{width:30,height:50,transition:buttonTransition,"&:hover":{opacity:.8},"&:disabled":{opacity:.5}},icon:{width:"20px !important",height:20,marginTop:5,color:e.colorText},input:{marginBottom:0,height:"auto",margin:[0,10],flex:1,border:0,padding:[4,10],borderRadius:e.borderRadius,background:e.inputBackground,color:e.inputColor},inputButton:{color:e.colorText}});class WebControls extends _react.Component{constructor(...e){super(...e),this.inputRef=(0,_react.createRef)(),this.state={inputUrl:"",editUrl:!1}}static getDerivedStateFromProps(e,t){const{url:o}=e,{editUrl:r}=t;if(!r)return{inputUrl:o,editUrl:t.editUrl}}render(){const{classes:e,goHome:t,canGoBack:o,goBack:r,canGoForward:s,goForward:a,reload:i,openInBrowser:n,url:u,navigate:l}=this.props,{inputUrl:c,editUrl:d}=this.state,{intl:p}=this.props;return(0,_jsxRuntime.jsxs)("div",{className:e.root,children:[(0,_jsxRuntime.jsx)("button",{onClick:t,type:"button",className:e.button,"data-tip":p.formatMessage(messages.goHome),"data-place":"bottom",children:(0,_jsxRuntime.jsx)(_icon.Icon,{icon:_js.mdiHomeOutline,className:e.icon})}),(0,_jsxRuntime.jsx)("button",{onClick:r,type:"button",className:e.button,disabled:!o,"data-tip":p.formatMessage(messages.back),"data-place":"bottom",children:(0,_jsxRuntime.jsx)(_icon.Icon,{icon:_js.mdiArrowLeft,className:e.icon})}),(0,_jsxRuntime.jsx)("button",{onClick:a,type:"button",className:e.button,disabled:!s,"data-tip":p.formatMessage(messages.forward),"data-place":"bottom",children:(0,_jsxRuntime.jsx)(_icon.Icon,{icon:_js.mdiArrowRight,className:e.icon})}),(0,_jsxRuntime.jsx)("button",{onClick:i,type:"button",className:e.button,"data-tip":p.formatMessage(messages.reload),"data-place":"bottom",children:(0,_jsxRuntime.jsx)(_icon.Icon,{icon:_js.mdiReload,className:e.icon})}),(0,_jsxRuntime.jsx)("input",{value:d?c:u,className:e.input,onChange:e=>this.setState({inputUrl:e.target.value}),onFocus:e=>{e.target.select(),this.setState({editUrl:!0})},onBlur:e=>{e.target.blur(),this.setState({editUrl:!1})},onKeyDown:e=>{"Enter"===e.key?(this.setState({editUrl:!1}),l(c),this.inputRef.current.blur()):"Escape"===e.key&&(this.setState({editUrl:!1,inputUrl:u}),this.inputRef.current.blur())},ref:this.inputRef}),(0,_jsxRuntime.jsx)("button",{onClick:n,type:"button",className:e.button,"data-tip":p.formatMessage(messages.openInBrowser),"data-place":"bottom",children:(0,_jsxRuntime.jsx)(_icon.Icon,{icon:_js.mdiEarth,className:e.icon})})]})}}WebControls.propTypes={classes:_propTypes.default.object.isRequired,goHome:_propTypes.default.func.isRequired,canGoBack:_propTypes.default.bool.isRequired,goBack:_propTypes.default.func.isRequired,canGoForward:_propTypes.default.bool.isRequired,goForward:_propTypes.default.func.isRequired,reload:_propTypes.default.func.isRequired,openInBrowser:_propTypes.default.func.isRequired,url:_propTypes.default.string.isRequired,navigate:_propTypes.default.func.isRequired};var _default=(0,_reactIntl.injectIntl)((0,_reactJss.default)(styles,{injectTheme:!0})((0,_mobxReact.observer)(WebControls)));exports.default=_default;