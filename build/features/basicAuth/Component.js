"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=require("react"),_propTypes=_interopRequireDefault(require("prop-types")),_reactJss=_interopRequireDefault(require("react-jss")),_mobxReact=require("mobx-react"),_reactIntl=require("react-intl"),_classnames=_interopRequireDefault(require("classnames")),_Modal=_interopRequireDefault(require("../../components/ui/Modal")),_Input=_interopRequireDefault(require("../../components/ui/Input")),_Button=_interopRequireDefault(require("../../components/ui/Button")),_store=require("./store"),_Form=_interopRequireDefault(require("./Form")),_styles=_interopRequireDefault(require("./styles")),_globalMessages=_interopRequireDefault(require("../../i18n/globalMessages")),_jsxRuntime=require("react/jsx-runtime");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const messages=(0,_reactIntl.defineMessages)({signIn:{id:"feature.basicAuth.signIn",defaultMessage:[{type:0,value:"Sign In"}]}});class BasicAuthModal extends _react.Component{submit(e){e.preventDefault();const s=_Form.default.values();(0,_store.sendCredentials)(s.user,s.password),(0,_store.resetState)()}cancel(){(0,_store.cancelLogin)(),this.close()}close(){(0,_store.resetState)(),_store.state.isModalVisible=!1}render(){const{classes:e}=this.props,{isModalVisible:s,authInfo:t}=_store.state;if(!t)return null;const{intl:r}=this.props;return(0,_jsxRuntime.jsxs)(_Modal.default,{isOpen:s,className:e.modal,close:this.cancel.bind(this),showClose:!1,children:[(0,_jsxRuntime.jsx)("h1",{children:r.formatMessage(messages.signIn)}),(0,_jsxRuntime.jsxs)("p",{children:["http",443===t.port&&"s","://",t.host]}),(0,_jsxRuntime.jsxs)("form",{onSubmit:this.submit.bind(this),className:(0,_classnames.default)("franz-form",e.form),children:[(0,_jsxRuntime.jsx)(_Input.default,{field:_Form.default.$("user"),showLabel:!1}),(0,_jsxRuntime.jsx)(_Input.default,{field:_Form.default.$("password"),showLabel:!1,showPasswordToggle:!0}),(0,_jsxRuntime.jsxs)("div",{className:e.buttons,children:[(0,_jsxRuntime.jsx)(_Button.default,{type:"button",label:r.formatMessage(_globalMessages.default.cancel),buttonType:"secondary",onClick:this.cancel.bind(this)}),(0,_jsxRuntime.jsx)(_Button.default,{type:"submit",label:r.formatMessage(messages.signIn)})]})]})]})}}BasicAuthModal.propTypes={classes:_propTypes.default.object.isRequired};var _default=(0,_reactIntl.injectIntl)((0,_reactJss.default)(_styles.default,{injectTheme:!0})((0,_mobxReact.observer)(BasicAuthModal)));exports.default=_default;