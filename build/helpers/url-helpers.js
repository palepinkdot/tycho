"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.openExternalUrl=exports.openPath=exports.isValidFileUrl=exports.isValidExternalURL=void 0;const url_1=require("url"),fs_extra_1=require("fs-extra"),electron_1=require("electron"),config_1=require("../config"),debug=require("debug")("Ferdi:Helpers:url");function isValidExternalURL(e){let r;try{r=new url_1.URL(e.toString())}catch{return!1}const t=config_1.ALLOWED_PROTOCOLS.includes(r.protocol);return debug("protocol check is",t,"for:",e),t}function isValidFileUrl(e){return e.startsWith("file")&&(0,fs_extra_1.existsSync)(new url_1.URL(e))}async function openPath(e){(0,fs_extra_1.ensureDirSync)(e),electron_1.shell.openPath(e)}function openExternalUrl(e,r=!1){debug("Open url:",e,"with skipValidityCheck:",r),(r||isValidExternalURL(e))&&electron_1.shell.openExternal(e.toString())}exports.isValidExternalURL=isValidExternalURL,exports.isValidFileUrl=isValidFileUrl,exports.openPath=openPath,exports.openExternalUrl=openExternalUrl;