"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),semver_1=(0,tslib_1.__importDefault)(require("semver")),fs_extra_1=require("fs-extra"),path_1=require("path"),config_1=require("../config"),jsUtils_1=require("../jsUtils");class Recipe{constructor(i){if(this.id="",this.name="",this.description="",this.version="",this.aliases=[],this.serviceURL="",this.hasDirectMessages=config_1.DEFAULT_SERVICE_SETTINGS.hasDirectMessages,this.hasIndirectMessages=config_1.DEFAULT_SERVICE_SETTINGS.hasIndirectMessages,this.hasNotificationSound=config_1.DEFAULT_SERVICE_SETTINGS.hasNotificationSound,this.hasTeamId=config_1.DEFAULT_SERVICE_SETTINGS.hasTeamId,this.hasCustomUrl=config_1.DEFAULT_SERVICE_SETTINGS.hasCustomUrl,this.hasHostedOption=config_1.DEFAULT_SERVICE_SETTINGS.hasHostedOption,this.urlInputPrefix="",this.urlInputSuffix="",this.message="",this.allowFavoritesDelineationInUnreadCount=config_1.DEFAULT_SERVICE_SETTINGS.allowFavoritesDelineationInUnreadCount,this.disablewebsecurity=config_1.DEFAULT_SERVICE_SETTINGS.disablewebsecurity,this.autoHibernate=config_1.DEFAULT_SERVICE_SETTINGS.autoHibernate,this.path="",this.partition="",!i)throw new Error("Recipe config not valid");if(!i.id)throw new Error(`Recipe '${i.name}' requires Id`);if(!semver_1.default.valid(i.version))throw new Error(`Version ${i.version} of recipe '${i.name}' is not a valid semver version`);this.id=(0,jsUtils_1.ifUndefinedString)(i.id,this.id),this.name=(0,jsUtils_1.ifUndefinedString)(i.name,this.name),this.version=(0,jsUtils_1.ifUndefinedString)(i.version,this.version),this.aliases=i.aliases||this.aliases,this.serviceURL=(0,jsUtils_1.ifUndefinedString)(i.config.serviceURL,this.serviceURL),this.hasDirectMessages=(0,jsUtils_1.ifUndefinedBoolean)(i.config.hasDirectMessages,this.hasDirectMessages),this.hasIndirectMessages=(0,jsUtils_1.ifUndefinedBoolean)(i.config.hasIndirectMessages,this.hasIndirectMessages),this.hasNotificationSound=(0,jsUtils_1.ifUndefinedBoolean)(i.config.hasNotificationSound,this.hasNotificationSound),this.hasTeamId=(0,jsUtils_1.ifUndefinedBoolean)(i.config.hasTeamId,this.hasTeamId),this.hasCustomUrl=(0,jsUtils_1.ifUndefinedBoolean)(i.config.hasCustomUrl,this.hasCustomUrl),this.hasHostedOption=(0,jsUtils_1.ifUndefinedBoolean)(i.config.hasHostedOption,this.hasHostedOption),this.urlInputPrefix=(0,jsUtils_1.ifUndefinedString)(i.config.urlInputPrefix,this.urlInputPrefix),this.urlInputSuffix=(0,jsUtils_1.ifUndefinedString)(i.config.urlInputSuffix,this.urlInputSuffix),this.disablewebsecurity=(0,jsUtils_1.ifUndefinedBoolean)(i.config.disablewebsecurity,this.disablewebsecurity),this.autoHibernate=(0,jsUtils_1.ifUndefinedBoolean)(i.config.autoHibernate,this.autoHibernate),this.message=(0,jsUtils_1.ifUndefinedString)(i.config.message,this.message),this.allowFavoritesDelineationInUnreadCount=(0,jsUtils_1.ifUndefinedBoolean)(i.config.allowFavoritesDelineationInUnreadCount,this.allowFavoritesDelineationInUnreadCount),this.path=i.path,this.partition=(0,jsUtils_1.ifUndefinedString)(i.config.partition,this.partition)}get author(){return[]}get hasDarkMode(){return(0,fs_extra_1.pathExistsSync)((0,path_1.join)(this.path,"darkmode.css"))}}exports.default=Recipe;