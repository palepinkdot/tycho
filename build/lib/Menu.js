"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_descriptor,_electron=require("electron"),_remote=require("@electron/remote"),_mobx=require("mobx"),_reactIntl=require("react-intl"),_config=require("../config"),_environment=require("../environment"),_environmentRemote=require("../environment-remote"),_actions=require("../features/todos/actions"),_actions2=require("../features/workspaces/actions"),_index=require("../features/workspaces/index"),_apiBase=_interopRequireWildcard(require("../api/apiBase")),_urlHelpers=require("../helpers/url-helpers"),_globalMessages=_interopRequireDefault(require("../i18n/globalMessages"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_getRequireWildcardCache=function(e){return e?a:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_getRequireWildcardCache(t);if(a&&a.has(e))return a.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}return s.default=e,a&&a.set(e,s),s}function _initializerDefineProperty(e,t,a,s){a&&Object.defineProperty(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(s):void 0})}function _applyDecoratedDescriptor(e,t,a,s,r){var o={};return Object.keys(s).forEach((function(e){o[e]=s[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=a.slice().reverse().reduce((function(a,s){return s(e,t,a)||a}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function _initializerWarningHelper(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}const menuItems=(0,_reactIntl.defineMessages)({edit:{id:"menu.edit",defaultMessage:[{type:0,value:"Edit"}]},undo:{id:"menu.edit.undo",defaultMessage:[{type:0,value:"Undo"}]},redo:{id:"menu.edit.redo",defaultMessage:[{type:0,value:"Redo"}]},cut:{id:"menu.edit.cut",defaultMessage:[{type:0,value:"Cut"}]},copy:{id:"menu.edit.copy",defaultMessage:[{type:0,value:"Copy"}]},paste:{id:"menu.edit.paste",defaultMessage:[{type:0,value:"Paste"}]},pasteAndMatchStyle:{id:"menu.edit.pasteAndMatchStyle",defaultMessage:[{type:0,value:"Paste And Match Style"}]},delete:{id:"menu.edit.delete",defaultMessage:[{type:0,value:"Delete"}]},selectAll:{id:"menu.edit.selectAll",defaultMessage:[{type:0,value:"Select All"}]},findInPage:{id:"menu.edit.findInPage",defaultMessage:[{type:0,value:"Find in Page"}]},speech:{id:"menu.edit.speech",defaultMessage:[{type:0,value:"Speech"}]},startSpeaking:{id:"menu.edit.startSpeaking",defaultMessage:[{type:0,value:"Start Speaking"}]},stopSpeaking:{id:"menu.edit.stopSpeaking",defaultMessage:[{type:0,value:"Stop Speaking"}]},startDictation:{id:"menu.edit.startDictation",defaultMessage:[{type:0,value:"Start Dictation"}]},emojiSymbols:{id:"menu.edit.emojiSymbols",defaultMessage:[{type:0,value:"Emoji & Symbols"}]},openQuickSwitch:{id:"menu.view.openQuickSwitch",defaultMessage:[{type:0,value:"Open Quick Switch"}]},back:{id:"menu.view.back",defaultMessage:[{type:0,value:"Back"}]},forward:{id:"menu.view.forward",defaultMessage:[{type:0,value:"Forward"}]},resetZoom:{id:"menu.view.resetZoom",defaultMessage:[{type:0,value:"Actual Size"}]},zoomIn:{id:"menu.view.zoomIn",defaultMessage:[{type:0,value:"Zoom In"}]},zoomOut:{id:"menu.view.zoomOut",defaultMessage:[{type:0,value:"Zoom Out"}]},toggleFullScreen:{id:"menu.view.toggleFullScreen",defaultMessage:[{type:0,value:"Toggle Full Screen"}]},toggleDarkMode:{id:"menu.view.toggleDarkMode",defaultMessage:[{type:0,value:"Toggle Dark Mode"}]},toggleDevTools:{id:"menu.view.toggleDevTools",defaultMessage:[{type:0,value:"Toggle Developer Tools"}]},toggleTodosDevTools:{id:"menu.view.toggleTodosDevTools",defaultMessage:[{type:0,value:"Toggle Todos Developer Tools"}]},toggleServiceDevTools:{id:"menu.view.toggleServiceDevTools",defaultMessage:[{type:0,value:"Toggle Service Developer Tools"}]},reloadService:{id:"menu.view.reloadService",defaultMessage:[{type:0,value:"Reload Service"}]},reloadFerdi:{id:"menu.view.reloadFerdi",defaultMessage:[{type:0,value:"Reload Ferdi"}]},lockFerdi:{id:"menu.view.lockFerdi",defaultMessage:[{type:0,value:"Lock Ferdi"}]},reloadTodos:{id:"menu.view.reloadTodos",defaultMessage:[{type:0,value:"Reload ToDos"}]},minimize:{id:"menu.window.minimize",defaultMessage:[{type:0,value:"Minimize"}]},close:{id:"menu.window.close",defaultMessage:[{type:0,value:"Close"}]},learnMore:{id:"menu.help.learnMore",defaultMessage:[{type:0,value:"Learn More"}]},changelog:{id:"menu.help.changelog",defaultMessage:[{type:0,value:"Changelog"}]},importExportData:{id:"menu.help.importExportData",defaultMessage:[{type:0,value:"Import/Export Configuration Data"}]},support:{id:"menu.help.support",defaultMessage:[{type:0,value:"Support"}]},debugInfo:{id:"menu.help.debugInfo",defaultMessage:[{type:0,value:"Copy Debug Information"}]},publishDebugInfo:{id:"menu.help.publishDebugInfo",defaultMessage:[{type:0,value:"Publish Debug Information"}]},debugInfoCopiedHeadline:{id:"menu.help.debugInfoCopiedHeadline",defaultMessage:[{type:0,value:"Ferdi Debug Information"}]},debugInfoCopiedBody:{id:"menu.help.debugInfoCopiedBody",defaultMessage:[{type:0,value:"Your Debug Information has been copied to your clipboard."}]},touchId:{id:"locked.touchId",defaultMessage:[{type:0,value:"Unlock with Touch ID"}]},touchIdPrompt:{id:"locked.touchIdPrompt",defaultMessage:[{type:0,value:"unlock via Touch ID"}]},tos:{id:"menu.help.tos",defaultMessage:[{type:0,value:"Terms of Service"}]},privacy:{id:"menu.help.privacy",defaultMessage:[{type:0,value:"Privacy Statement"}]},file:{id:"menu.file",defaultMessage:[{type:0,value:"File"}]},view:{id:"menu.view",defaultMessage:[{type:0,value:"View"}]},services:{id:"menu.services",defaultMessage:[{type:0,value:"Services"}]},window:{id:"menu.window",defaultMessage:[{type:0,value:"Window"}]},help:{id:"menu.help",defaultMessage:[{type:0,value:"Help"}]},about:{id:"menu.app.about",defaultMessage:[{type:0,value:"About Ferdi"}]},checkForUpdates:{id:"menu.app.checkForUpdates",defaultMessage:[{type:0,value:"Check for updates"}]},hide:{id:"menu.app.hide",defaultMessage:[{type:0,value:"Hide"}]},hideOthers:{id:"menu.app.hideOthers",defaultMessage:[{type:0,value:"Hide Others"}]},unhide:{id:"menu.app.unhide",defaultMessage:[{type:0,value:"Unhide"}]},autohideMenuBar:{id:"menu.app.autohideMenuBar",defaultMessage:[{type:0,value:"Auto-hide menu bar"}]},addNewService:{id:"menu.services.addNewService",defaultMessage:[{type:0,value:"Add New Service..."}]},addNewWorkspace:{id:"menu.workspaces.addNewWorkspace",defaultMessage:[{type:0,value:"Add New Workspace..."}]},openWorkspaceDrawer:{id:"menu.workspaces.openWorkspaceDrawer",defaultMessage:[{type:0,value:"Open workspace drawer"}]},closeWorkspaceDrawer:{id:"menu.workspaces.closeWorkspaceDrawer",defaultMessage:[{type:0,value:"Close workspace drawer"}]},activateNextService:{id:"menu.services.setNextServiceActive",defaultMessage:[{type:0,value:"Activate next service"}]},activatePreviousService:{id:"menu.services.activatePreviousService",defaultMessage:[{type:0,value:"Activate previous service"}]},muteApp:{id:"sidebar.muteApp",defaultMessage:[{type:0,value:"Disable notifications & audio"}]},unmuteApp:{id:"sidebar.unmuteApp",defaultMessage:[{type:0,value:"Enable notifications & audio"}]},workspaces:{id:"menu.workspaces",defaultMessage:[{type:0,value:"Workspaces"}]},defaultWorkspace:{id:"menu.workspaces.defaultWorkspace",defaultMessage:[{type:0,value:"All services"}]},todos:{id:"menu.todos",defaultMessage:[{type:0,value:"Todos"}]},openTodosDrawer:{id:"menu.Todoss.openTodosDrawer",defaultMessage:[{type:0,value:"Open Todos drawer"}]},closeTodosDrawer:{id:"menu.Todoss.closeTodosDrawer",defaultMessage:[{type:0,value:"Close Todos drawer"}]},enableTodos:{id:"menu.todos.enableTodos",defaultMessage:[{type:0,value:"Enable Todos"}]},serviceGoHome:{id:"menu.services.goHome",defaultMessage:[{type:0,value:"Home"}]}});function getActiveService(){return window.ferdi.stores.services.active}const _titleBarTemplateFactory=(e,t)=>[{label:e.formatMessage(menuItems.edit),accelerator:`${(0,_environment.altKey)()}+E`,submenu:[{label:e.formatMessage(menuItems.undo),role:"undo"},{label:e.formatMessage(menuItems.redo),role:"redo"},{type:"separator"},{label:e.formatMessage(menuItems.cut),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+X`,role:"cut"},{label:e.formatMessage(menuItems.copy),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+C`,role:"copy"},{label:e.formatMessage(menuItems.paste),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+V`,role:"paste"},{label:e.formatMessage(menuItems.pasteAndMatchStyle),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.shiftKey)()}+V`,role:"pasteAndMatchStyle"},{label:e.formatMessage(menuItems.delete),role:"delete"},{label:e.formatMessage(menuItems.selectAll),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+A`,role:"selectall"}]},{label:e.formatMessage(menuItems.view),accelerator:`${(0,_environment.altKey)()}+V`,visible:!t,submenu:[{type:"separator"},{label:e.formatMessage(menuItems.openQuickSwitch),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+S`,click(){window.ferdi.features.quickSwitch.state.isModalVisible=!0}},{type:"separator"},{label:e.formatMessage(menuItems.findInPage),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+F`,click(){const e=getActiveService();e&&(e.webview.focus(),window.ferdi.actions.service.sendIPCMessage({serviceId:e.id,channel:"find-in-page",args:{}}))}},{type:"separator"},{label:e.formatMessage(menuItems.back),accelerator:`${_environment.isMac?(0,_environment.cmdOrCtrlShortcutKey)():(0,_environment.altKey)()}+Left`,click(){getActiveService().webview.goBack()}},{label:e.formatMessage(menuItems.forward),accelerator:`${_environment.isMac?(0,_environment.cmdOrCtrlShortcutKey)():(0,_environment.altKey)()}+Right`,click(){getActiveService().webview.goForward()}},{type:"separator"},{label:e.formatMessage(menuItems.resetZoom),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+0`,click(){getActiveService().webview.setZoomLevel(0)}},{label:e.formatMessage(menuItems.zoomIn),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+plus`,click(){const e=getActiveService().webview,t=e.getZoomLevel();e.setZoomLevel(t+.5)}},{label:e.formatMessage(menuItems.zoomOut),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+-`,click(){const e=getActiveService().webview,t=e.getZoomLevel();e.setZoomLevel(t-.5)}},{type:"separator"},{label:e.formatMessage(menuItems.toggleFullScreen),role:"toggleFullScreen"},{label:e.formatMessage(menuItems.toggleDarkMode),type:"checkbox",accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.shiftKey)()}+D`,checked:window.ferdi.stores.settings.app.darkMode,click:()=>{window.ferdi.actions.settings.update({type:"app",data:{darkMode:!window.ferdi.stores.settings.app.darkMode}})}}]},{label:e.formatMessage(menuItems.services),accelerator:`${(0,_environment.altKey)()}+S`,visible:!t,submenu:[]},{label:e.formatMessage(menuItems.workspaces),accelerator:`${(0,_environment.altKey)()}+W`,submenu:[],visible:!t},{label:e.formatMessage(menuItems.todos),submenu:[],visible:!t},{label:e.formatMessage(menuItems.window),role:"window",submenu:[{label:e.formatMessage(menuItems.minimize),role:"minimize"},{label:e.formatMessage(menuItems.close),role:"close"}]},{label:e.formatMessage(menuItems.help),accelerator:`${(0,_environment.altKey)()}+H`,role:"help",submenu:[{label:e.formatMessage(menuItems.learnMore),click(){(0,_urlHelpers.openExternalUrl)(_config.LIVE_API_FERDI_WEBSITE,!0)}},{label:e.formatMessage(menuItems.changelog),click(){(0,_urlHelpers.openExternalUrl)(`${_config.GITHUB_FERDI_URL}/ferdi/releases/tag/v${_environmentRemote.ferdiVersion}`,!0)}},{label:e.formatMessage(menuItems.importExportData),click(){(0,_urlHelpers.openExternalUrl)((0,_apiBase.default)(!1),!0)},enabled:!t},{type:"separator"},{label:e.formatMessage(menuItems.support),click(){(0,_urlHelpers.openExternalUrl)(`${_config.LIVE_API_FERDI_WEBSITE}/contact`,!0)}},{type:"separator"},{label:e.formatMessage(menuItems.tos),click(){(0,_urlHelpers.openExternalUrl)(`${(0,_apiBase.termsBase)()}/terms`,!0)}},{label:e.formatMessage(menuItems.privacy),click(){(0,_urlHelpers.openExternalUrl)(`${(0,_apiBase.termsBase)()}/privacy`,!0)}}]}];let FranzMenu=(_descriptor=_applyDecoratedDescriptor((_class=class{constructor(e,t){_initializerDefineProperty(this,"currentTemplate",_descriptor,this),this.stores=e,this.actions=t,setTimeout((()=>{(0,_mobx.autorun)(this._build.bind(this))}),10)}rebuild(){this._build()}get template(){return this.currentTemplate.toJS()}_build(){const e=Object.assign([],this.serviceTpl());if(void 0===window.ferdi)return void console.log("skipping menu init");const{intl:t}=window.ferdi,a=this.stores.settings.app.locked&&this.stores.settings.app.lockingFeatureEnabled&&this.stores.user.isLoggedIn,s=_titleBarTemplateFactory(t,a),{actions:r}=this;if(_environment.isMac||s[1].submenu.push({label:t.formatMessage(menuItems.autohideMenuBar),type:"checkbox",checked:window.ferdi.stores.settings.app.autohideMenuBar,click:()=>{window.ferdi.actions.settings.update({type:"app",data:{autohideMenuBar:!window.ferdi.stores.settings.app.autohideMenuBar}})}}),a){const e=!!_environment.isMac&&(this.stores.settings.app.useTouchIdToUnlock&&_remote.systemPreferences.canPromptTouchID());s[0].submenu.unshift({label:t.formatMessage(menuItems.touchId),accelerator:`${(0,_environment.lockFerdiShortcutKey)()}`,visible:e,click(){_remote.systemPreferences.promptTouchID(t.formatMessage(menuItems.touchIdPrompt)).then((()=>{r.settings.update({type:"app",data:{locked:!1}})}))}},{type:"separator",visible:e})}else s[1].submenu.push({type:"separator"},{label:t.formatMessage(menuItems.toggleDevTools),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.altKey)()}+I`,click:(e,t)=>{t.webContents.toggleDevTools()}},{label:t.formatMessage(menuItems.toggleServiceDevTools),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.shiftKey)()}+${(0,_environment.altKey)()}+I`,click:()=>{this.actions.service.openDevToolsForActiveService()},enabled:this.stores.user.isLoggedIn&&this.stores.services.enabled.length>0}),this.stores.todos.isFeatureEnabledByUser&&s[1].submenu.push({label:t.formatMessage(menuItems.toggleTodosDevTools),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.shiftKey)()}+${(0,_environment.altKey)()}+O`,click:()=>{document.querySelector("#todos-panel webview")&&this.actions.todos.openDevTools()}}),s[1].submenu.unshift({label:t.formatMessage(menuItems.reloadService),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+R`,click:()=>{this.stores.user.isLoggedIn&&this.stores.services.enabled.length>0?getActiveService().recipe.id===_config.CUSTOM_WEBSITE_RECIPE_ID?getActiveService().webview.reload():this.actions.service.reloadActive():window.location.reload()}},{label:t.formatMessage(menuItems.reloadFerdi),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.shiftKey)()}+R`,click:()=>{window.location.reload()}},{label:t.formatMessage(menuItems.reloadTodos),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.shiftKey)()}+${(0,_environment.altKey)()}+R`,click:()=>{this.actions.todos.reload()}},{type:"separator"},{label:t.formatMessage(menuItems.lockFerdi),accelerator:`${(0,_environment.lockFerdiShortcutKey)()}`,enabled:this.stores.user.isLoggedIn&&this.stores.settings.app.lockingFeatureEnabled,click(){r.settings.update({type:"app",data:{locked:!0}})}}),e.length>0&&(s[2].submenu=e),s[3].submenu=this.workspacesMenu(),s[4].submenu=this.todosMenu();s.unshift({label:_environment.isMac?_remote.app.name:t.formatMessage(menuItems.file),accelerator:`${(0,_environment.altKey)()}+F`,submenu:[{label:t.formatMessage(menuItems.about),role:"about"},{type:"separator"},{label:t.formatMessage(_globalMessages.default.settings),accelerator:`${(0,_environment.settingsShortcutKey)()}`,click:()=>{this.actions.ui.openSettings({path:"app"})},enabled:this.stores.user.isLoggedIn,visible:!a},{label:t.formatMessage(menuItems.checkForUpdates),visible:!a,click:()=>{this.actions.app.checkForUpdates()}},{type:"separator",visible:!a},{label:t.formatMessage(menuItems.services),role:"services",submenu:[]},{type:"separator"},{label:t.formatMessage(menuItems.hide),role:"hide"},{label:t.formatMessage(menuItems.hideOthers),role:"hideOthers"},{label:t.formatMessage(menuItems.unhide),role:"unhide"},{type:"separator"},{label:t.formatMessage(_globalMessages.default.quit),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+Q`,click(){_remote.app.quit()}}]});const o={label:t.formatMessage(menuItems.about),click:()=>{_remote.dialog.showMessageBox({type:"info",title:"Franz Ferdinand",message:"Ferdi",detail:(0,_environmentRemote.aboutAppDetails)()})}};_environment.isMac?(s[1].submenu.push({type:"separator"},{label:t.formatMessage(menuItems.speech),submenu:[{label:t.formatMessage(menuItems.startSpeaking),role:"startspeaking"},{label:t.formatMessage(menuItems.stopSpeaking),role:"stopspeaking"}]}),s[5].submenu.unshift(o,{type:"separator"})):(s[0].submenu=[{label:t.formatMessage(_globalMessages.default.settings),accelerator:`${(0,_environment.settingsShortcutKey)()}`,click:()=>{this.actions.ui.openSettings({path:"app"})},enabled:this.stores.user.isLoggedIn,visible:!a},{type:"separator"},{label:t.formatMessage(_globalMessages.default.quit),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+Q`,click(){_remote.app.quit()}}],s[s.length-1].submenu.push({type:"separator"},o)),a||(e.length>0&&(s[3].submenu=e),s[4].submenu=this.workspacesMenu(),s[5].submenu=this.todosMenu(),s[s.length-1].submenu.push({type:"separator"},...this.debugMenu())),this.currentTemplate=s;const i=_remote.Menu.buildFromTemplate(s);_remote.Menu.setApplicationMenu(i)}serviceTpl(){const{intl:e}=window.ferdi,{user:t,services:a,settings:s}=this.stores;if(!t.isLoggedIn)return[];const r=[],o=!_environment.isLinux;r.push({label:e.formatMessage(menuItems.addNewService),accelerator:`${(0,_environment.addNewServiceShortcutKey)()}`,click:()=>{this.actions.ui.openSettings({path:"recipes"})}},{type:"separator"},{label:e.formatMessage(menuItems.activateNextService),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+tab`,click:()=>this.actions.service.setActiveNext(),visible:!o},{label:e.formatMessage(menuItems.activateNextService),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.altKey)()}+right`,click:()=>this.actions.service.setActiveNext(),visible:o},{label:e.formatMessage(menuItems.activatePreviousService),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.shiftKey)()}+tab`,click:()=>this.actions.service.setActivePrev(),visible:!o},{label:e.formatMessage(menuItems.activatePreviousService),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.altKey)()}+left`,click:()=>this.actions.service.setActivePrev(),visible:o},{label:e.formatMessage(s.all.app.isAppMuted?menuItems.unmuteApp:menuItems.muteApp).replace("&","&&"),accelerator:`${(0,_environment.muteFerdiShortcutKey)()}`,click:()=>this.actions.app.toggleMuteApp()},{type:"separator"});for(const[e,t]of a.allDisplayed.entries())r.push({label:this._getServiceName(t),accelerator:e<9?`${(0,_environment.cmdOrCtrlShortcutKey)()}+${e+1}`:null,type:"radio",checked:t.isActive,click:()=>{this.actions.service.setActive({serviceId:t.id}),_environment.isMac&&0===e&&(0,_remote.getCurrentWindow)().restore()}});return a.active&&a.active.recipe.id===_config.CUSTOM_WEBSITE_RECIPE_ID&&r.push({type:"separator"},{label:e.formatMessage(menuItems.serviceGoHome),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.shiftKey)()}+H`,click:()=>this.actions.service.reloadActive()}),r}workspacesMenu(){const{workspaces:e,activeWorkspace:t,isWorkspaceDrawerOpen:a}=_index.workspaceStore,{intl:s}=window.ferdi,r=[];if(r.push({label:s.formatMessage(menuItems.addNewWorkspace),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.shiftKey)()}+N`,click:()=>{_actions2.workspaceActions.openWorkspaceSettings()},enabled:this.stores.user.isLoggedIn}),!this.stores.settings.app.alwaysShowWorkspaces){const e=a?menuItems.closeWorkspaceDrawer:menuItems.openWorkspaceDrawer;r.push({label:s.formatMessage(e),accelerator:`${(0,_environment.workspaceToggleShortcutKey)()}`,click:()=>{_actions2.workspaceActions.toggleWorkspaceDrawer()},enabled:this.stores.user.isLoggedIn})}r.push({type:"separator"},{label:s.formatMessage(menuItems.defaultWorkspace),accelerator:`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.altKey)()}+0`,type:"radio",checked:!t,click:()=>{_actions2.workspaceActions.deactivate()}});for(const[a,s]of e.entries())r.push({label:s.name,accelerator:a<9?`${(0,_environment.cmdOrCtrlShortcutKey)()}+${(0,_environment.altKey)()}+${a+1}`:null,type:"radio",checked:!!t&&s.id===t.id,click:()=>{_actions2.workspaceActions.activate({workspace:s})}});return r}todosMenu(){const{isTodosPanelVisible:e,isFeatureEnabledByUser:t}=this.stores.todos,{intl:a}=window.ferdi,s=[],r=e?menuItems.closeTodosDrawer:menuItems.openTodosDrawer;return s.push({label:a.formatMessage(r),accelerator:`${(0,_environment.todosToggleShortcutKey)()}`,click:()=>{_actions.todoActions.toggleTodosPanel()},enabled:this.stores.user.isLoggedIn&&t}),t||s.push({type:"separator"},{label:a.formatMessage(menuItems.enableTodos),click:()=>{_actions.todoActions.toggleTodosFeatureVisibility()}}),s}debugMenu(){const{intl:e}=window.ferdi;return[{label:e.formatMessage(menuItems.debugInfo),click:()=>{const{debugInfo:t}=this.stores.app;_electron.clipboard.write({text:JSON.stringify(t)}),this.actions.app.notify({title:e.formatMessage(menuItems.debugInfoCopiedHeadline),options:{body:e.formatMessage(menuItems.debugInfoCopiedBody)}})}},{label:e.formatMessage(menuItems.publishDebugInfo),click:()=>{window.ferdi.features.publishDebugInfo.state.isModalVisible=!0}}]}_getServiceName(e){if(e.name)return e.name;let{name:t}=e.recipe;return e.team?t=`${t} (${e.team})`:e.customUrl&&(t=`${t} (${e.customUrl})`),t}}).prototype,"currentTemplate",[_mobx.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_class);var _default=FranzMenu;exports.default=_default;