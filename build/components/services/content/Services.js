"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=require("react"),_propTypes=_interopRequireDefault(require("prop-types")),_mobxReact=require("mobx-react"),_reactRouter=require("react-router"),_reactIntl=require("react-intl"),_reactConfetti=_interopRequireDefault(require("react-confetti")),_ms=_interopRequireDefault(require("ms")),_reactJss=_interopRequireDefault(require("react-jss")),_ServiceView=_interopRequireDefault(require("./ServiceView")),_Appear=_interopRequireDefault(require("../../ui/effects/Appear")),_jsxRuntime=require("react/jsx-runtime");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const messages=(0,_reactIntl.defineMessages)({getStarted:{id:"services.getStarted",defaultMessage:[{type:0,value:"Get started"}]},login:{id:"services.login",defaultMessage:[{type:0,value:"Please login to use Ferdi."}]},serverless:{id:"services.serverless",defaultMessage:[{type:0,value:"Use Ferdi without an Account"}]},serverInfo:{id:"services.serverInfo",defaultMessage:[{type:0,value:"Optionally, you can change your Ferdi server by clicking the cog in the bottom left corner. If you are switching over (from one of the hosted servers) to using Ferdi without an account, please be informed that you can export your data from that server and subsequently import it using the Help menu to resurrect all your workspaces and configured services!"}]}}),styles={confettiContainer:{position:"absolute",width:"100%",zIndex:9999,pointerEvents:"none"}};class Services extends _react.Component{constructor(...e){super(...e),this.state={showConfetti:!0},this._confettiTimeout=null}componentDidMount(){this._confettiTimeout=window.setTimeout((()=>{this.setState({showConfetti:!1})}),(0,_ms.default)("8s"))}componentWillUnmount(){this._confettiTimeout&&clearTimeout(this._confettiTimeout)}render(){const{services:e,handleIPCMessage:t,setWebviewReference:s,detachService:i,openWindow:r,reload:a,openSettings:o,update:n,userHasCompletedSignup:u,classes:c,isSpellcheckerEnabled:l}=this.props,{showConfetti:d}=this.state,{intl:p}=this.props;return(0,_jsxRuntime.jsxs)("div",{className:"services",children:[u&&(0,_jsxRuntime.jsx)("div",{className:c.confettiContainer,children:(0,_jsxRuntime.jsx)(_reactConfetti.default,{width:window.width,height:window.height,numberOfPieces:d?200:0})}),0===e.length&&(0,_jsxRuntime.jsx)(_Appear.default,{timeout:1500,transitionName:"slideUp",children:(0,_jsxRuntime.jsxs)("div",{className:"services__no-service",children:[(0,_jsxRuntime.jsx)("img",{src:"./assets/images/logo-beard-only.svg",alt:"Logo",style:{maxHeight:"50vh"}}),(0,_jsxRuntime.jsx)(_Appear.default,{timeout:300,transitionName:"slideUp",children:(0,_jsxRuntime.jsx)(_reactRouter.Link,{to:"/settings/recipes",className:"button",children:p.formatMessage(messages.getStarted)})})]})}),e.filter((e=>!e.isTodosService)).map((e=>(0,_jsxRuntime.jsx)(_ServiceView.default,{service:e,handleIPCMessage:t,setWebviewReference:s,detachService:i,openWindow:r,reload:()=>a({serviceId:e.id}),edit:()=>o({path:`services/edit/${e.id}`}),enable:()=>n({serviceId:e.id,serviceData:{isEnabled:!0},redirect:!1}),isSpellcheckerEnabled:l},e.id)))]})}}Services.propTypes={services:_mobxReact.PropTypes.arrayOrObservableArray,setWebviewReference:_propTypes.default.func.isRequired,detachService:_propTypes.default.func.isRequired,handleIPCMessage:_propTypes.default.func.isRequired,openWindow:_propTypes.default.func.isRequired,reload:_propTypes.default.func.isRequired,openSettings:_propTypes.default.func.isRequired,update:_propTypes.default.func.isRequired,userHasCompletedSignup:_propTypes.default.bool.isRequired,classes:_propTypes.default.object.isRequired,isSpellcheckerEnabled:_propTypes.default.bool.isRequired},Services.defaultProps={services:[]};var _default=(0,_reactIntl.injectIntl)((0,_reactJss.default)(styles,{injectTheme:!0})((0,_mobxReact.inject)("actions")((0,_mobxReact.observer)(Services))));exports.default=_default;