"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=require("react"),_propTypes=_interopRequireDefault(require("prop-types")),_mobxReact=require("mobx-react"),_reactIntl=require("react-intl"),_reactRouter=require("react-router"),_reactJss=_interopRequireDefault(require("react-jss")),_js=require("@mdi/js"),_index=require("../../ui/button/index"),_index2=require("../../ui/input/index"),_headline=require("../../ui/headline"),_SearchInput=_interopRequireDefault(require("../../ui/SearchInput")),_Infobox=_interopRequireDefault(require("../../ui/Infobox")),_RecipeItem=_interopRequireDefault(require("./RecipeItem")),_Loader=_interopRequireDefault(require("../../ui/Loader")),_Appear=_interopRequireDefault(require("../../ui/effects/Appear")),_config=require("../../../config"),_RecipePreview=_interopRequireDefault(require("../../../models/RecipePreview")),_icon=require("../../ui/icon"),_jsxRuntime=require("react/jsx-runtime");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const messages=(0,_reactIntl.defineMessages)({headline:{id:"settings.recipes.headline",defaultMessage:[{type:0,value:"Available services"}]},searchService:{id:"settings.searchService",defaultMessage:[{type:0,value:"Search service"}]},mostPopularRecipes:{id:"settings.recipes.mostPopular",defaultMessage:[{type:0,value:"Most popular"}]},allRecipes:{id:"settings.recipes.all",defaultMessage:[{type:0,value:"All services"}]},customRecipes:{id:"settings.recipes.custom",defaultMessage:[{type:0,value:"Custom Services"}]},nothingFound:{id:"settings.recipes.nothingFound",defaultMessage:[{type:0,value:'Sorry, but no service matched your search term - but you can still probably add it using the "Custom Website" option. Please note that the website might show more services that have been added to Ferdi since the version that you are currently on. To get those new services, please consider upgrading to a newer version of Ferdi.'}]},servicesSuccessfulAddedInfo:{id:"settings.recipes.servicesSuccessfulAddedInfo",defaultMessage:[{type:0,value:"Service successfully added"}]},missingService:{id:"settings.recipes.missingService",defaultMessage:[{type:0,value:"Missing a service?"}]},customRecipeIntro:{id:"settings.recipes.customService.intro",defaultMessage:[{type:0,value:"To add a custom service, copy the service recipe folder inside:"}]},openFolder:{id:"settings.recipes.customService.openFolder",defaultMessage:[{type:0,value:"Open folder"}]},openDevDocs:{id:"settings.recipes.customService.openDevDocs",defaultMessage:[{type:0,value:"Developer Documentation"}]},headlineCustomRecipes:{id:"settings.recipes.customService.headline.customRecipes",defaultMessage:[{type:0,value:"Custom 3rd Party Recipes"}]},headlineCommunityRecipes:{id:"settings.recipes.customService.headline.communityRecipes",defaultMessage:[{type:0,value:"Community 3rd Party Recipes"}]},headlineDevRecipes:{id:"settings.recipes.customService.headline.devRecipes",defaultMessage:[{type:0,value:"Your Development Service Recipes"}]}}),styles={devRecipeIntroContainer:{textAlign:"center",width:"100%",height:"auto",margin:[40,0]},path:{marginTop:20,"& > div":{fontFamily:"SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace"}},actionContainer:{"& button":{margin:[0,10]}},devRecipeList:{marginTop:20,height:"auto"},proBadge:{marginLeft:"10px !important"}};class RecipesDashboard extends _react.Component{render(){const{recipes:e,customWebsiteRecipe:s,isLoading:i,hasLoadedRecipes:t,showAddServiceInterface:r,searchRecipes:a,resetSearch:n,serviceStatus:c,searchNeedle:o,recipeFilter:u,recipeDirectory:d,openRecipeDirectory:l,openDevDocs:p,classes:m}=this.props,{intl:_}=this.props,R=e.filter((e=>!e.isDevRecipe)),g=e.filter((e=>e.isDevRecipe));return(0,_jsxRuntime.jsxs)("div",{className:"settings__main",children:[(0,_jsxRuntime.jsx)("div",{className:"settings__header",children:(0,_jsxRuntime.jsx)("h1",{children:_.formatMessage(messages.headline)})}),(0,_jsxRuntime.jsxs)("div",{className:"settings__body recipes",children:[c.length>0&&c.includes("created")&&(0,_jsxRuntime.jsx)(_Appear.default,{children:(0,_jsxRuntime.jsx)(_Infobox.default,{type:"success",icon:"checkbox-marked-circle-outline",dismissable:!0,children:_.formatMessage(messages.servicesSuccessfulAddedInfo)})}),(0,_jsxRuntime.jsx)(_SearchInput.default,{placeholder:_.formatMessage(messages.searchService),onChange:e=>a(e),onReset:()=>n(),autoFocus:!0,throttle:!0}),(0,_jsxRuntime.jsxs)("div",{className:"recipes__navigation",children:[(0,_jsxRuntime.jsx)(_reactRouter.Link,{to:"/settings/recipes",className:"badge",activeClassName:""+(o?"":"badge--primary"),onClick:()=>n(),children:_.formatMessage(messages.mostPopularRecipes)}),(0,_jsxRuntime.jsx)(_reactRouter.Link,{to:"/settings/recipes/all",className:"badge",activeClassName:""+(o?"":"badge--primary"),onClick:()=>n(),children:_.formatMessage(messages.allRecipes)}),(0,_jsxRuntime.jsx)(_reactRouter.Link,{to:"/settings/recipes/dev",className:"badge",activeClassName:""+(o?"":"badge--primary"),onClick:()=>n(),children:_.formatMessage(messages.customRecipes)}),(0,_jsxRuntime.jsxs)("a",{href:_config.FRANZ_SERVICE_REQUEST,target:"_blank",className:"link recipes__service-request",rel:"noreferrer",children:[_.formatMessage(messages.missingService)," ",(0,_jsxRuntime.jsx)(_icon.Icon,{icon:_js.mdiOpenInNew})]})]}),i?(0,_jsxRuntime.jsx)(_Loader.default,{}):(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:["dev"===u&&(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsx)(_headline.H2,{children:_.formatMessage(messages.headlineCustomRecipes)}),(0,_jsxRuntime.jsxs)("div",{className:m.devRecipeIntroContainer,children:[(0,_jsxRuntime.jsx)("p",{children:_.formatMessage(messages.customRecipeIntro)}),(0,_jsxRuntime.jsx)(_index2.Input,{value:d,className:m.path,showLabel:!1}),(0,_jsxRuntime.jsxs)("div",{className:m.actionContainer,children:[(0,_jsxRuntime.jsx)(_index.Button,{onClick:l,buttonType:"secondary",label:_.formatMessage(messages.openFolder)}),(0,_jsxRuntime.jsx)(_index.Button,{onClick:p,buttonType:"secondary",label:_.formatMessage(messages.openDevDocs)})]})]})]}),"dev"===u&&R.length>0&&(0,_jsxRuntime.jsx)(_headline.H3,{children:_.formatMessage(messages.headlineCommunityRecipes)}),(0,_jsxRuntime.jsx)("div",{className:"recipes__list",children:R.map((e=>(0,_jsxRuntime.jsx)(_RecipeItem.default,{recipe:e,onClick:()=>r({recipeId:e.id})},e.id)))}),t&&0===e.length&&"dev"!==u&&(0,_jsxRuntime.jsxs)("div",{className:"align-middle settings__empty-state",children:[s&&s.id&&(0,_jsxRuntime.jsx)(_RecipeItem.default,{recipe:s,onClick:()=>r({recipeId:s.id})},s.id),(0,_jsxRuntime.jsx)("p",{className:"settings__empty-state-text",children:_.formatMessage(messages.nothingFound)})]}),"dev"===u&&g.length>0&&(0,_jsxRuntime.jsxs)("div",{className:m.devRecipeList,children:[(0,_jsxRuntime.jsx)(_headline.H3,{children:_.formatMessage(messages.headlineDevRecipes)}),(0,_jsxRuntime.jsx)("div",{className:"recipes__list",children:g.map((e=>(0,_jsxRuntime.jsx)(_RecipeItem.default,{recipe:e,onClick:()=>r({recipeId:e.id})},e.id)))})]})]})]})]})}}RecipesDashboard.propTypes={recipes:_mobxReact.PropTypes.arrayOrObservableArray.isRequired,customWebsiteRecipe:_propTypes.default.instanceOf(_RecipePreview.default).isRequired,isLoading:_propTypes.default.bool.isRequired,hasLoadedRecipes:_propTypes.default.bool.isRequired,showAddServiceInterface:_propTypes.default.func.isRequired,searchRecipes:_propTypes.default.func.isRequired,resetSearch:_propTypes.default.func.isRequired,serviceStatus:_mobxReact.PropTypes.arrayOrObservableArray.isRequired,searchNeedle:_propTypes.default.string,recipeFilter:_propTypes.default.string,recipeDirectory:_propTypes.default.string.isRequired,openRecipeDirectory:_propTypes.default.func.isRequired,openDevDocs:_propTypes.default.func.isRequired,classes:_propTypes.default.object.isRequired},RecipesDashboard.defaultProps={searchNeedle:"",recipeFilter:"all"};var _default=(0,_reactIntl.injectIntl)((0,_reactJss.default)(styles,{injectTheme:!0})((0,_mobxReact.observer)(RecipesDashboard)));exports.default=_default;