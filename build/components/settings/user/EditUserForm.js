"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=require("react"),_propTypes=_interopRequireDefault(require("prop-types")),_mobxReact=require("mobx-react"),_reactIntl=require("react-intl"),_reactRouter=require("react-router"),_index=require("../../ui/input/index"),_Form=_interopRequireDefault(require("../../../lib/Form")),_Button=_interopRequireDefault(require("../../ui/Button")),_Radio=_interopRequireDefault(require("../../ui/Radio")),_Infobox=_interopRequireDefault(require("../../ui/Infobox")),_jsxRuntime=require("react/jsx-runtime");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const messages=(0,_reactIntl.defineMessages)({headline:{id:"settings.account.headline",defaultMessage:[{type:0,value:"Account"}]},headlineProfile:{id:"settings.account.headlineProfile",defaultMessage:[{type:0,value:"Update profile"}]},headlineAccount:{id:"settings.account.headlineAccount",defaultMessage:[{type:0,value:"Account information"}]},headlinePassword:{id:"settings.account.headlinePassword",defaultMessage:[{type:0,value:"Change password"}]},successInfo:{id:"settings.account.successInfo",defaultMessage:[{type:0,value:"Your changes have been saved"}]},buttonSave:{id:"settings.account.buttonSave",defaultMessage:[{type:0,value:"Update profile"}]}});class EditUserForm extends _react.Component{submit(e){e.preventDefault(),this.props.form.submit({onSuccess:e=>{const s=e.values();this.props.onSubmit(s)},onError:()=>{}})}render(){const{status:e,form:s,isSaving:t}=this.props,{intl:i}=this.props;return(0,_jsxRuntime.jsxs)("div",{className:"settings__main",children:[(0,_jsxRuntime.jsxs)("div",{className:"settings__header",children:[(0,_jsxRuntime.jsx)("span",{className:"settings__header-item",children:(0,_jsxRuntime.jsx)(_reactRouter.Link,{to:"/settings/user",children:i.formatMessage(messages.headline)})}),(0,_jsxRuntime.jsx)("span",{className:"separator"}),(0,_jsxRuntime.jsx)("span",{className:"settings__header-item",children:i.formatMessage(messages.headlineProfile)})]}),(0,_jsxRuntime.jsx)("div",{className:"settings__body",children:(0,_jsxRuntime.jsxs)("form",{onSubmit:e=>this.submit(e),id:"form",children:[e.length>0&&e.includes("data-updated")&&(0,_jsxRuntime.jsx)(_Infobox.default,{type:"success",icon:"checkbox-marked-circle-outline",children:i.formatMessage(messages.successInfo)}),(0,_jsxRuntime.jsx)("h2",{children:i.formatMessage(messages.headlineAccount)}),(0,_jsxRuntime.jsxs)("div",{className:"grid__row",children:[(0,_jsxRuntime.jsx)(_index.Input,{...s.$("firstname").bind(),focus:!0}),(0,_jsxRuntime.jsx)(_index.Input,{...s.$("lastname").bind()})]}),(0,_jsxRuntime.jsx)(_index.Input,{...s.$("email").bind()}),(0,_jsxRuntime.jsx)(_Radio.default,{field:s.$("accountType")}),"company"===s.$("accountType").value&&(0,_jsxRuntime.jsx)(_index.Input,{field:s.$("organization")}),(0,_jsxRuntime.jsx)("h2",{children:i.formatMessage(messages.headlinePassword)}),(0,_jsxRuntime.jsx)(_index.Input,{...s.$("oldPassword").bind(),showPasswordToggle:!0}),(0,_jsxRuntime.jsx)(_index.Input,{...s.$("newPassword").bind(),showPasswordToggle:!0,scorePassword:!0})]})}),(0,_jsxRuntime.jsx)("div",{className:"settings__controls",children:t?(0,_jsxRuntime.jsx)(_Button.default,{type:"submit",label:i.formatMessage(messages.buttonSave),loaded:!t,buttonType:"secondary",disabled:!0}):(0,_jsxRuntime.jsx)(_Button.default,{type:"submit",label:i.formatMessage(messages.buttonSave),htmlForm:"form"})})]})}}EditUserForm.propTypes={status:_mobxReact.PropTypes.observableArray.isRequired,form:_propTypes.default.instanceOf(_Form.default).isRequired,onSubmit:_propTypes.default.func.isRequired,isSaving:_propTypes.default.bool.isRequired};var _default=(0,_reactIntl.injectIntl)((0,_mobxReact.observer)(EditUserForm));exports.default=_default;