"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Input=void 0;const tslib_1=require("tslib"),jsx_runtime_1=require("react/jsx-runtime"),js_1=require("@mdi/js"),react_1=(0,tslib_1.__importDefault)(require("@mdi/react")),classnames_1=(0,tslib_1.__importDefault)(require("classnames")),react_2=require("react"),react_jss_1=(0,tslib_1.__importDefault)(require("react-jss")),error_1=require("../error"),label_1=require("../label"),wrapper_1=require("../wrapper"),scorePassword_1=require("./scorePassword"),styles_1=(0,tslib_1.__importDefault)(require("./styles"));class InputComponent extends react_2.Component{constructor(...e){super(...e),this.state={passwordScore:0,showPassword:!1},this.inputRef=(0,react_2.createRef)()}componentDidMount(){const{focus:e,data:s}=this.props;this.inputRef&&this.inputRef.current&&(e&&this.inputRef.current.focus(),s&&Object.keys(s).map((e=>this.inputRef.current.dataset[e]=s[e])))}onChange(e){const{scorePassword:s,onChange:r}=this.props;r&&r(e),this.inputRef&&this.inputRef.current&&s&&this.setState({passwordScore:(0,scorePassword_1.scorePasswordFunc)(this.inputRef.current.value)})}onInputKeyPress(e){if("Enter"===e.key){const{onEnterKey:e}=this.props;e&&e()}}render(){const{classes:e,className:s,disabled:r,error:t,id:i,inputClassName:a,label:o,prefix:n,scorePassword:u,suffix:l,showLabel:d,showPasswordToggle:c,type:p,value:_,name:m,placeholder:h,spellCheck:f,onBlur:x,onFocus:j,min:w,max:b,step:v,required:P,noMargin:y}=this.props,{showPassword:q,passwordScore:g}=this.state,C="password"===p&&q?"text":p;return(0,jsx_runtime_1.jsxs)(wrapper_1.Wrapper,{className:s,identifier:"franz-input",noMargin:y,children:[(0,jsx_runtime_1.jsxs)(label_1.Label,{title:o,showLabel:d,htmlFor:i,className:e.label,isRequired:P,children:[(0,jsx_runtime_1.jsxs)("div",{className:(0,classnames_1.default)({[`${a}`]:a,[`${e.hasPasswordScore}`]:u,[`${e.wrapper}`]:!0,[`${e.disabled}`]:r,[`${e.hasError}`]:t}),children:[n&&(0,jsx_runtime_1.jsx)("span",{className:e.prefix,children:n},void 0),(0,jsx_runtime_1.jsx)("input",{id:i,type:C,name:m,value:_,placeholder:h,spellCheck:f,className:e.input,ref:this.inputRef,onChange:this.onChange.bind(this),onFocus:j,onBlur:x,disabled:r,onKeyPress:this.onInputKeyPress.bind(this),min:w,max:b,step:v},void 0),l&&(0,jsx_runtime_1.jsx)("span",{className:e.suffix,children:l},void 0),c&&(0,jsx_runtime_1.jsx)("button",{type:"button",className:e.formModifier,onClick:()=>this.setState((e=>({showPassword:!e.showPassword}))),tabIndex:-1,children:(0,jsx_runtime_1.jsx)(react_1.default,{path:q?js_1.mdiEyeOff:js_1.mdiEye},void 0)},void 0)]},void 0),u&&(0,jsx_runtime_1.jsx)("div",{className:(0,classnames_1.default)({[`${e.passwordScore}`]:!0,[`${e.hasError}`]:t}),children:(0,jsx_runtime_1.jsx)("meter",{value:g<5?5:g,low:30,high:75,optimum:100,max:100},void 0)},void 0)]},void 0),t&&(0,jsx_runtime_1.jsx)(error_1.Error,{message:t},void 0)]},void 0)}}InputComponent.defaultProps={focus:!1,onChange:()=>{},onBlur:()=>{},onFocus:()=>{},scorePassword:!1,showLabel:!0,showPasswordToggle:!1,type:"text",disabled:!1},exports.Input=(0,react_jss_1.default)(styles_1.default,{injectTheme:!0})(InputComponent);