"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=require("react"),_propTypes=_interopRequireDefault(require("prop-types")),_mobxReact=require("mobx-react"),_mobxReactForm=require("mobx-react-form"),_classnames=_interopRequireDefault(require("classnames")),_reactIntl=require("react-intl"),_js=require("@mdi/js"),_passwordHelpers=require("../../helpers/password-helpers"),_icon=require("./icon"),_jsxRuntime=require("react/jsx-runtime");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const messages=(0,_reactIntl.defineMessages)({passwordToggle:{id:"settings.app.form.passwordToggle",defaultMessage:[{type:0,value:"Password toggle"}]}});class Input extends _react.Component{constructor(...e){super(...e),this.state={showPassword:!1,passwordScore:0},this.inputElement=void 0}componentDidMount(){this.props.focus&&this.focus()}onChange(e){const{field:s,scorePassword:r}=this.props;s.onChange(e),r&&this.setState({passwordScore:(0,_passwordHelpers.scorePassword)(s.value)})}focus(){this.inputElement.focus()}render(){const{field:e,className:s,showPasswordToggle:r,showLabel:o,scorePassword:a,prefix:t,suffix:i}=this.props,{passwordScore:n}=this.state,{intl:l}=this.props;let{type:p}=e;return"password"===p&&this.state.showPassword&&(p="text"),(0,_jsxRuntime.jsxs)("div",{className:(0,_classnames.default)({"franz-form__field":!0,"has-error":e.error,[`${s}`]:s}),children:[(0,_jsxRuntime.jsxs)("div",{className:"franz-form__input-wrapper",children:[t&&(0,_jsxRuntime.jsx)("span",{className:"franz-form__input-prefix",children:t}),(0,_jsxRuntime.jsx)("input",{id:e.id,type:p,className:"franz-form__input",name:e.name,value:e.value,placeholder:e.placeholder,onChange:e=>this.onChange(e),onBlur:e.onBlur,onFocus:e.onFocus,ref:e=>{this.inputElement=e},disabled:e.disabled}),i&&(0,_jsxRuntime.jsx)("span",{className:"franz-form__input-suffix",children:i}),r&&(0,_jsxRuntime.jsx)("button",{type:"button",className:(0,_classnames.default)({"franz-form__input-modifier":!0}),onClick:()=>this.setState((e=>({showPassword:!e.showPassword}))),tabIndex:-1,"aria-label":l.formatMessage(messages.passwordToggle),children:(0,_jsxRuntime.jsx)(_icon.Icon,{icon:this.state.showPassword?_js.mdiEye:_js.mdiEyeOff})}),a&&(0,_jsxRuntime.jsx)("div",{className:"franz-form__password-score",children:(0,_jsxRuntime.jsx)("meter",{value:n<5?5:n,low:30,high:75,optimum:100,max:100})})]}),e.label&&o&&(0,_jsxRuntime.jsx)("label",{className:"franz-form__label",htmlFor:e.name,children:e.label}),e.error&&(0,_jsxRuntime.jsx)("div",{className:"franz-form__error",children:e.error})]})}}Input.propTypes={field:_propTypes.default.instanceOf(_mobxReactForm.Field).isRequired,className:_propTypes.default.string,focus:_propTypes.default.bool,showPasswordToggle:_propTypes.default.bool,showLabel:_propTypes.default.bool,scorePassword:_propTypes.default.bool,prefix:_propTypes.default.string,suffix:_propTypes.default.string},Input.defaultProps={className:null,focus:!1,showPasswordToggle:!1,showLabel:!0,scorePassword:!1,prefix:"",suffix:""};var _default=(0,_reactIntl.injectIntl)((0,_mobxReact.observer)(Input));exports.default=_default;